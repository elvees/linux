# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/clock/elvees,mcom03-clk-pm.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: MCom-03 subsystem clock and power management

maintainers:
  - Vasiliy Zasukhin <vzasukhin@elvees.com>

properties:
  compatible:
    enum:
      - elvees,mcom03-clk-pm

  clocks:
    maxItems: 1
    description: Input clock from XTI.

  '#clock-cells':
    const: 1

  assigned-clocks: true

  assigned-clock-rates: true

  elvees,power-domain:
    type: boolean
    description: |
      If this property exist then power management is available for the subsystem.

  '#power-domain-cells':
    const: 0

  elvees,service-urb:
    $ref: /schemas/types.yaml#/definitions/phandle
    description: |
      Reference to URB node of SERVICE subsystem, must be set if "elvees,power-domain" exist.

  reg:
    description: |
      Array of regions which define subsystem UCG memory regions.

  elvees,subsystem:
    $ref: /schemas/types.yaml#/definitions/uint32
    minimum: 0
    maximum: 7
    description: |
      MCom-03 SoC subsystem. Can be used defines MCOM03_SUBSYSTEM_* from
      include/dt-bindings/soc/elvees,mcom03.h file.

  elvees,urb:
    $ref: /schemas/types.yaml#/definitions/phandle
    description: |
      Reference to current subsystem URB node.

  enabled-clocks:
    description: |
      List of clocks that must be enabled by clock and power management driver.

required:
  - compatible
  - reg
  - clocks
  - '#clock-cells'
  - elvees,subsystem
  - elvees,urb

additionalProperties: false

examples:
  - |
    #include <dt-bindings/clock/mcom03-clock.h>
    #include <dt-bindings/soc/elvees,mcom03.h>
    sdr_clocks: sdr_clocks@1900000 {
        compatible = "elvees,mcom03-clk-pm";
        elvees,subsystem = <MCOM03_SUBSYSTEM_SDR>;
        clocks = <&xti_clk>;
        elvees,urb = <&sdr_urb>;
        reg = <0 0x1900000 0 0x80>, // UCG0
              <0 0x1900100 0 0x80>; // UCG1
        #clock-cells = <1>;
        assigned-clocks = <&sdr_clocks CLK_SDR_PLL0>,
                          <&sdr_clocks CLK_SDR_PLL1>,
                          <&sdr_clocks CLK_SDR_PLL2>,
                          <&sdr_clocks CLK_SDR_UCG0_CFG>,
                          <&sdr_clocks CLK_SDR_UCG0_EXT>;
        assigned-clock-rates = <1200000000
                                648000000
                                459000000
                                100000000
                                600000000>;
        enabled-clocks = <CLK_SDR_UCG0_CFG>,
                         <CLK_SDR_UCG0_AUX_PCI>;
        #power-domain-cells = <0>;
        elvees,power-domain;
        elvees,service-urb = <&service_urb>;
    };

...
